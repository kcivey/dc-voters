jQuery(function(f){var e=new Date(1344459600000);f(".countdown").countdown({until:e,alwaysExpire:true,expiryText:"The filing deadline has passed, but you could still run as a write-in."});f("#form-anc").submit(function(i){var h=f("#address").val(),j=f("button",this);i.preventDefault();if(!h){return}j.text("Please Wait").attr("disabled","disabled");f("#info").children().hide();f("#info").removeClass("hide");f.ajax({url:"/findLocation",data:{str:h},dataType:f.browser.msie?"text":"xml",success:b,complete:function(){j.text("Go").removeAttr("disabled")}})});function c(h){if(f.browser.msie){var i=new ActiveXObject("Microsoft.XMLDOM");i.loadXML(h);h=i}return h}function b(l){var p=f(c(l)).find("Table1"),j={},o,k,h,m,i,n;p.children().each(function(q,r){j[r.tagName]=r.textContent});if(j.FULLADDRESS){f("#info .canonical-address").text(j.FULLADDRESS);f("#address-found").show()}else{f("#address-not-found").show()}if(!j.SMD_2002||!j.SMD_2002.match(/^(SMD )?[1-8][A-M][01]\d$/)){f.error("Can't find current SMD");return}o=j.SMD_2002.replace("SMD ","");f("#info .smd-2002").text(o);f("#current-smd").show();if(!j.SMD_2012){k=o;f("#smd-not-available").show()}else{k=j.SMD_2012.replace("SMD ","");if(o==k){f("#smd-not-changing").show()}else{f("#smd-changing").show()}}h=k.substr(0,1);m=k.substr(0,2);if(h==4){i="Ward 4 ANC "+m+" 2013 ANC and SMD Boundaries"}else{if(h==5){i="Ward5 ANC "+m+" Boundaries"}else{i="Ward "+h+" ANC "+m+" 2013 Boundaries"}}i="http://ancdc.us/"+encodeURIComponent(i)+".pdf";f("#info .smd-2012").text(k);f("#info .anc").text(m);f("a.map").attr("href",i);n="SELECT * FROM swdata WHERE smd = '"+o+"'";f.ajax({url:"https://api.scraperwiki.com/api/1.0/datastore/sqlite",data:{format:"jsondict",name:"dc_ancs",query:n},dataType:"jsonp",success:a});n="SELECT * FROM swdata WHERE smd = '"+k+"'";f.ajax({url:"https://api.scraperwiki.com/api/1.0/datastore/sqlite",data:{format:"jsondict",name:"dc_anc_candidates",query:n},dataType:"jsonp",success:d})}function g(i){var h=i.first_name+" "+i.last_name;if(i.suffix){h+=" "+i.suffix}return h}function a(h){var i=h[0];if(i){f("#info .commissioner").text(g(i))}}function d(i){var k=i.length,j,h;if(k){j=f("#candidates");h=j.find("ul").empty();j.find(".number-candidates").text(k);j.find(".candidate-plural").text(k==1?"":"s");j.find(".candidate-verb").text(k==1?"has":"have");f.each(i,function(l,n){var m=g(n);if(n.filing_date){m+=" (filed)"}f("<li/>").text(m).appendTo(h)});f("#candidates").show()}else{f("#no-candidates").show()}}});